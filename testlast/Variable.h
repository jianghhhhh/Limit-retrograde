#define uchar unsigned char  
#define uint unsigned int  
//**********T6963c命令宏定义*********************//  
//地址指针设置  
#define cur_pos 0x21 //光标位置设置  
#define CGR_pos 0x22 //CGRAM偏置地址设置  
#define add_pos 0x24 //地址指针位置  
  
//显示区域设置  
#define txt_stp 0x40 //文本区首地址  
#define txt_wid 0x41 //文本区宽度  
#define grh_stp 0x42 //图形区首地址  
#define grh_wid 0x43 //图形区宽度  
  
//显示方式设置  
#define mod_or  0x80 //显示方式：逻辑或  
#define mod_xor 0x81 //显示方式：逻辑异或  
#define mod_and 0x82 //显示方式：逻辑与  
#define mod_tch 0x83 //显示方式：文本特征  
  
//显示状态设置  
#define dis_sw 0x90 //显示开关  
                    //D0=1/0:光标闪烁启用/禁用  
                    //D1=1/0:光标显示启用/禁用  
                    //D2=1/0:文本显示启用/禁用  
                    //D3=1/0:图形显示启用/禁用  
  
//光标形状设置  
#define cur_shp 0xa0 //光标形状选择：0xa0~0xa7光标占的行数：1行~8行  
  
//数据自动读写设置  
#define aut_wr  0xb0 //自动写  
#define aut_rd  0xb1 //自动读  
#define aut_ovr 0xb2 //自动读写结束  
  
//数据一次读写设置  
#define inc_wr 0xc0 //数据写，地址+1  
#define inc_rd 0xc1 //数据读，地址+1  
#define dec_wr 0xc2 //数据写，地址-1  
#define dec_rd 0xc3 //数据读，地址-1  
#define noc_wr 0xc4 //数据写，地址不变  
#define noc_rd 0xc5 //数据读，地址不变  
  
uchar tcount;           //中断计数  
uint Timtcount;         //计时变量（秒）  
uchar playing,startflag;//游戏标志，开始标志  
uchar levelg;           //记录当前关卡  
uchar man_x,man_y;      //纪录当前小人所在位置  
//**********lcd12864引脚位定义*********************//  
sbit wr =P2^0;  
sbit rd =P2^1;   
sbit cd =P2^2;  
sbit rst=P2^3;   
  
uchar code Number[][16]= //数字0-9  
{  
    0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00,        //0  
    0x00,0x00,0x00,0x10,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,        //1  
    0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x04,0x04,0x08,0x10,0x20,0x42,0x7E,0x00,0x00,        //2  
    0x00,0x00,0x00,0x3C,0x42,0x42,0x04,0x18,0x04,0x02,0x02,0x42,0x44,0x38,0x00,0x00,        //3  
    0x00,0x00,0x00,0x04,0x0C,0x14,0x24,0x24,0x44,0x44,0x7E,0x04,0x04,0x1E,0x00,0x00,        //4  
    0x00,0x00,0x00,0x7E,0x40,0x40,0x40,0x58,0x64,0x02,0x02,0x42,0x44,0x38,0x00,0x00,        //5  
    0x00,0x00,0x00,0x1C,0x24,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x24,0x18,0x00,0x00,        //6  
    0x00,0x00,0x00,0x7E,0x44,0x44,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,        //7  
    0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3C,0x00,0x00,        //8  
    0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x26,0x1A,0x02,0x02,0x24,0x38,0x00,0x00,        //9  
};  
//开机画面  
uchar code start_box[]=  
{  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xE0,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0xFC,0x7C,0xC0,0x06,0x30,0xC6,0x00,0x1F,0xFF,0xFF,0x00,0x00,0x00,  
0x00,0x00,0x01,0x86,0xC7,0xF0,0x06,0x1F,0xC7,0xF8,0x30,0x00,0x01,0xC0,0x00,0x00,  
0x00,0x00,0x01,0x87,0x86,0x18,0x0C,0x01,0x80,0x0C,0x30,0x00,0x00,0xC0,0x00,0x00,  
0x00,0x00,0x01,0x87,0x82,0x18,0x1C,0x01,0x80,0x0E,0x30,0x00,0x00,0x40,0x00,0x00,  
0x00,0x00,0x01,0x87,0x06,0x0C,0x18,0x01,0x00,0x06,0x30,0x00,0x00,0x40,0x00,0x00,  
0x00,0x00,0x0F,0x87,0x07,0x0F,0x10,0x03,0x00,0x0C,0x30,0x00,0x00,0xC0,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x00,0x01,0x90,0x43,0x00,0x0C,0x1F,0xFF,0x01,0x80,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x00,0x01,0x98,0xC3,0x08,0x38,0x00,0x3E,0x03,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x0C,0x00,0x01,0x8F,0xC3,0x1C,0x38,0x00,0x3C,0x06,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x0C,0x00,0x03,0x1F,0xC7,0xFC,0x7C,0x7F,0xF6,0x0F,0xE0,0x00,0x00,  
0x00,0x00,0x0F,0x88,0x1E,0x1F,0x1C,0x7F,0x67,0xDC,0xC0,0x03,0x18,0x30,0x00,0x00,  
0x00,0x00,0x01,0x8C,0x00,0x03,0x18,0x01,0x80,0x0C,0xC0,0x01,0xF0,0x30,0x00,0x00,  
0x00,0x00,0x03,0x87,0x80,0x03,0x10,0x00,0x80,0x0C,0xC0,0x00,0x00,0x30,0x00,0x00,  
0x00,0x00,0x0E,0x01,0x80,0x03,0x10,0x00,0x9F,0x0C,0xC0,0x00,0x00,0x30,0x00,0x00,  
0x00,0x00,0x0C,0x01,0x80,0x03,0x18,0x0F,0x80,0x0C,0xC0,0x00,0x00,0x30,0x00,0x00,  
0x00,0x00,0x0C,0x01,0x9E,0x1F,0x0E,0x1B,0x80,0x0C,0xC0,0x00,0x00,0x30,0x00,0x00,  
0x00,0x00,0x0C,0x03,0x00,0x03,0x0E,0x31,0x00,0x0C,0x7F,0xF0,0x7F,0xE0,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x00,0x03,0x1C,0x30,0x9F,0x0C,0x00,0x30,0x60,0x00,0x00,0x00,  
0x00,0x00,0x07,0x86,0x00,0x03,0x38,0x30,0xC0,0x0C,0x00,0x30,0x60,0x00,0x00,0x00,  
0x00,0x00,0x01,0x86,0x1E,0x1F,0x30,0x18,0xC0,0x0C,0x01,0xF0,0x60,0x00,0x00,0x00,  
0x00,0x00,0x07,0x86,0x00,0x01,0xB0,0x0F,0x80,0x0C,0x03,0x00,0x60,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x00,0x01,0x98,0x07,0x1F,0x0C,0x03,0x00,0x60,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x00,0x01,0x8C,0x06,0x00,0x0C,0x03,0x00,0x60,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x00,0x03,0x07,0x06,0x00,0x0C,0x03,0x00,0x60,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x06,0x0F,0xFF,0x03,0x06,0x00,0x0C,0x03,0x00,0x60,0x00,0x00,0x00,  
0x00,0x00,0x0C,0x0F,0x18,0x00,0x03,0x07,0x00,0x18,0x03,0x00,0xC0,0x00,0x00,0x00,  
0x00,0x00,0x07,0xF9,0xF0,0x00,0x01,0xFD,0xFF,0xF0,0x01,0xFF,0x80,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFD,0xFE,0x18,0x7F,0x3F,0xC0,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x8D,0xB6,0x18,0x31,0xB6,0xC0,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x8C,0x30,0x1C,0x31,0x86,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x80,0x30,0x3C,0x31,0x86,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x30,0x3C,0x3F,0x06,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x30,0x36,0x36,0x06,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x30,0x3E,0x36,0x06,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x30,0x66,0x33,0x06,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x8C,0x30,0x63,0x33,0x06,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x8C,0x30,0x63,0x31,0x86,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xF8,0x78,0xF7,0xF9,0xCF,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  
};  
/********************************************* 
游戏关卡 一共9关 
数字符号表示:人物1 砖头2 箱子3 目的4 成功5 
**********************************************/  
uchar code level[][8][8]={  
    /*第1关*/  
    0,0,2,2,2,2,2,0,  
    2,2,2,0,0,0,2,0,  
    2,0,3,0,2,0,2,2,  
    2,0,2,0,0,4,0,2,  
    2,0,0,0,0,2,0,2,  
    2,2,0,2,0,0,0,2,  
    0,2,1,0,0,2,2,2,  
    0,2,2,2,2,2,0,0,  
      
    /*第2关*/  
    2,2,2,2,2,2,2,2,  
    2,0,0,0,0,0,1,2,  
    2,0,0,0,5,0,0,2,  
    2,0,0,2,2,2,2,2,  
    2,2,0,0,2,0,0,0,  
    2,0,3,0,2,0,0,0,  
    2,0,0,4,2,0,0,0,  
    2,2,2,2,2,0,0,0,  
  
    /*第3关*/  
    0,0,2,2,2,2,0,0,  
    0,0,2,4,4,2,0,0,  
    0,2,2,0,4,2,2,0,  
    0,2,0,0,3,4,2,0,  
    2,2,0,3,0,0,2,2,  
    2,0,0,2,3,3,0,2,  
    2,0,0,1,0,0,0,2,  
    2,2,2,2,2,2,2,2,  
  
    /*第4关*/  
    0,0,0,2,2,2,2,0,  
    0,2,2,2,0,1,2,0,  
    0,2,0,0,3,0,2,0,  
    2,2,0,2,0,2,2,2,  
    2,0,0,2,0,2,4,2,  
    2,0,2,0,0,3,4,2,  
    2,0,0,0,0,0,0,2,  
    2,2,2,2,2,2,2,2,  
  
    /*第5关*/  
    0,0,0,2,2,2,2,0,  
    0,2,2,2,0,1,2,0,  
    0,2,0,0,3,0,2,0,  
    2,2,0,2,0,2,2,2,  
    2,0,0,2,0,2,4,2,  
    2,0,2,0,0,0,0,2,  
    2,0,0,0,0,0,0,2,  
    2,2,2,2,2,2,2,2,  
  
    /*第6关*/  
    0,0,0,2,2,2,2,0,  
    0,2,2,2,0,1,2,0,  
    0,2,0,0,3,0,2,0,  
    2,2,0,2,0,2,2,2,  
    2,0,0,2,0,2,4,2,  
    2,0,2,0,0,3,4,2,  
    2,0,3,0,0,0,4,2,  
    2,2,2,2,2,2,2,2,  
      
    /*第7关*/  
    0,0,2,2,2,2,2,0,  
    2,2,2,0,0,0,2,0,  
    2,0,3,0,2,0,2,2,  
    2,0,2,0,0,4,0,2,  
    2,0,0,0,0,2,0,2,  
    2,2,3,2,4,0,0,2,  
    0,2,1,0,0,2,2,2,  
    0,2,2,2,2,2,0,0,      
      
    /*第8关*/  
    0,2,2,2,2,0,0,0,  
    2,2,0,0,2,0,0,0,  
    2,1,3,0,2,0,0,0,  
    2,2,3,0,2,2,0,0,  
    2,2,0,3,0,2,0,0,  
    2,4,3,0,0,2,0,0,  
    2,4,4,5,4,2,0,0,  
    2,2,2,2,2,2,0,0,  
  
    /*第9关*/  
    0,0,0,2,2,2,2,0,  
    0,2,2,2,0,0,2,0,  
    2,2,0,1,3,0,2,0,  
    2,0,4,3,0,0,2,0,  
    2,0,4,5,0,2,2,0,  
    2,0,4,3,0,2,0,0,  
    2,2,0,0,2,2,0,0,  
    0,2,2,2,2,0,0,0,  
      
};  
uchar level_temp[8][8]=             //记录当前的游戏界面的变化  
{  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
    0,0,0,0,0,0,0,0,  
};  
uchar code elements[][8]=  
{  
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  //0空白  
    0x3C,0x7E,0x66,0x3C,0x7E,0x99,0x3C,0x66,  //1人物  
    0x7F,0x7F,0x7F,0x00,0xEF,0xEF,0xEF,0x00,  //2砖头  
    0xFF,0xC3,0xA5,0x99,0x99,0xA5,0xC3,0xFF,  //3箱子  
    0x00,0x18,0x24,0x4A,0x52,0x24,0x18,0x00,  //4目标  
    0xFF,0xBD,0xDB,0xE7,0xE7,0xDB,0xBD,0xFF,  //5箱子到达目标       
};    
unsigned char code Di[]=    //"第"字                                                        //第  
{  
    0x20,0x40,0x3F,0x7E,0x48,0x90,0x85,0x08,0x3F,0xF8,0x01,0x08,0x01,0x08,0x3F,0xF8,  
    0x21,0x00,0x21,0x00,0x3F,0xFC,0x03,0x04,0x05,0x04,0x19,0x28,0xE1,0x10,0x01,0x00,  
};  
unsigned char code Guan[]=  //“关”字                                                     //关  
{  
    0x10,0x10,0x08,0x10,0x08,0x20,0x00,0x00,0x3F,0xF8,0x01,0x00,0x01,0x00,0x01,0x00,  
    0xFF,0xFE,0x01,0x00,0x02,0x80,0x02,0x80,0x04,0x40,0x08,0x20,0x30,0x18,0xC0,0x06,  
};  
  
unsigned char code Yong[]=  //“用”字                                                      //用  
{  
    0x00,0x00,0x3F,0xF8,0x21,0x08,0x21,0x08,0x21,0x08,0x3F,0xF8,0x21,0x08,0x21,0x08,  
    0x21,0x08,0x3F,0xF8,0x21,0x08,0x21,0x08,0x21,0x08,0x41,0x08,0x41,0x28,0x80,0x10,  
};   
  
unsigned char code Shi[]=   //“时”字                                                          //时  
{  
    0x00,0x08,0x00,0x08,0x7C,0x08,0x44,0x08,0x45,0xFE,0x44,0x08,0x44,0x08,0x7C,0x08,  
    0x44,0x88,0x44,0x48,0x44,0x48,0x44,0x08,0x7C,0x08,0x44,0x08,0x00,0x28,0x00,0x10,  
};  
  
unsigned char code Miao[]=  //“秒”字                                                      //秒  
{  
    0x08,0x20,0x1C,0x20,0xF0,0x20,0x10,0xA8,0x10,0xA4,0xFC,0xA2,0x11,0x22,0x31,0x20,  
    0x3A,0x24,0x54,0x24,0x54,0x28,0x90,0x08,0x10,0x10,0x10,0x20,0x10,0xC0,0x00,0x00,  
};  